-function(){"use strict";var g=function(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a};function h(){this.g={}}h.prototype.add=function(a,b){var d="string"==typeof a?a:a.getString();this.g[d]||(this.g[d]=[]);this.g[d].push(b)};var k=function(a){var b=[],d="object"==typeof gwd&&"GwdId"in gwd,c;for(c in a.g)b.push(d?new gwd.GwdId(c):c);return b},l=function(a,b){return b?a.g["string"==typeof b?b:b.getString()]||[]:[]};function m(a,b){this.b=a;this.A=b;this.m=this.handleMetricEvent_.bind(this)}m.prototype.observe=function(a){if(a.nodeType==Node.ELEMENT_NODE)for(var b=k(this.b),d=0;d<b.length;d++){var c=n(b[d]);if(c&&g(a,c)){var e=l(this.b,b[d]);e&&e.forEach(function(a){c.addEventListener(a.event,this.m,!1)}.bind(this))}}};
var p=function(a,b){if(b.nodeType==Node.ELEMENT_NODE)for(var d=k(a.b),c=0;c<d.length;c++){var e=n(d[c]);if(e&&g(b,e)){var f=l(a.b,d[c]);f&&f.forEach(function(a){e.removeEventListener(a.event,this.m,!1)}.bind(a))}}};m.prototype.handleMetricEvent_=function(a){this.A(a)};var n=function(a){return"string"==typeof a?document.getElementById(a):a.getElement(document)};document.registerElement&&document.registerElement("gwd-metric-event",{prototype:Object.create(HTMLElement.prototype,{})});document.registerElement&&document.registerElement("gwd-metric-configuration",{prototype:Object.create(HTMLElement.prototype,{})});document.registerElement&&document.registerElement("gwd-exit",{prototype:Object.create(HTMLElement.prototype,{})});document.registerElement&&document.registerElement("gwd-timer",{prototype:Object.create(HTMLElement.prototype,{})});document.registerElement&&document.registerElement("gwd-doubleclick",{prototype:Object.create(HTMLElement.prototype,{createdCallback:{value:function(){this.s=this.handleEnablerInit_.bind(this);this.p=this.handleEnablerVisible_.bind(this);this.t=this.handleEnablerPageLoaded_.bind(this);this.i=this.handleEnablerExpandStart_.bind(this);this.h=this.handleEnablerCollapseStart_.bind(this);this.m=this.handleMetricEvent_.bind(this);this.v=this.handlePageTransitionEnd_.bind(this);this.w=this.handleResize_.bind(this);
this.k=this.l=!1;this.q=[];this.j=!1;this.F=this.hasAttribute("fullscreen");this.o=null;this.d=!1;this.n=window.innerHeight>=window.innerWidth?1:2;this.c=null},enumerable:!0},attachedCallback:{value:function(){Enabler.addEventListener(studio.events.StudioEvent.EXPAND_START,this.i);Enabler.addEventListener(studio.events.StudioEvent.COLLAPSE_START,this.h);Enabler.addEventListener(studio.events.StudioEvent.FULLSCREEN_EXPAND_START,this.i);Enabler.addEventListener(studio.events.StudioEvent.FULLSCREEN_COLLAPSE_START,
this.h);this.a=this.querySelector("[is=gwd-pagedeck]");this.a.addEventListener("pagetransitionend",this.v,!1);this.c=document.getElementById(this.getAttribute("data-provider"));this.b=this.getMetricConfiguration_();this.u=new m(this.b,this.m);window.addEventListener("resize",this.w,!1)},enumerable:!0},detachedCallback:{value:function(){Enabler.removeEventListener(studio.events.StudioEvent.INIT,this.s);Enabler.removeEventListener(studio.events.StudioEvent.VISIBLE,this.p);Enabler.removeEventListener(studio.events.StudioEvent.PAGE_LOADED,
this.t);Enabler.removeEventListener(studio.events.StudioEvent.EXPAND_START,this.i);Enabler.removeEventListener(studio.events.StudioEvent.COLLAPSE_START,this.h);Enabler.removeEventListener(studio.events.StudioEvent.FULLSCREEN_EXPAND_START,this.i);Enabler.removeEventListener(studio.events.StudioEvent.FULLSCREEN_COLLAPSE_START,this.h);this.a.removeEventListener("pagetransitionend",this.v,!1);window.removeEventListener("resize",this.w,!1)},enumerable:!0},initAd:{value:function(){this.j=!1;this.onEnablerInit_(this.s)},
enumerable:!0},exit:{value:function(a,b,d,c){Enabler.exit(a,b);("undefined"==typeof c||c)&&this.pauseMedia_();d&&this.goToPage()},enumerable:!0},exitOverride:{value:function(a,b,d,c){Enabler.exitOverride(a,b);("undefined"==typeof c||c)&&this.pauseMedia_();d&&this.goToPage()},enumerable:!0},incrementCounter:{value:function(a,b){Enabler.counter(a,b)},enumerable:!0},startTimer:{value:function(a){Enabler.startTimer(a)},enumerable:!0},stopTimer:{value:function(a){Enabler.stopTimer(a)},enumerable:!0},reportManualClose:{value:function(){Enabler.reportManualClose()},
enumerable:!0},getMetricConfiguration_:{value:function(){var a=this.querySelector("gwd-metric-configuration"),b=new h;if(a)for(var a=Array.prototype.slice.call(a.getElementsByTagName("gwd-metric-event")),d=0;d<a.length;d++){var c=a[d],e=c.getAttribute("source");if(e){var f=c.getAttribute("exit"),c={event:c.getAttribute("event"),D:c.getAttribute("metric")||f,B:c.hasAttribute("cumulative"),exit:f};b.add(this.getIdentifier_(e),c)}}return b}},handleMetricEvent_:{value:function(a){var b=this.getIdentifier_(a.target),
d=b+": "+a.type,c;a:{c=l(this.b,b);for(var e=0;e<c.length;e++)if(c[e].event==a.type){c=c[e];break a}c=void 0}c.exit&&a.detail&&a.detail.url?(Enabler.exitOverride(b+": "+c.exit,a.detail.url),a.detail.handled=!0,a.detail.collapse&&this.goToPage()):this.incrementCounter(c.D||d,c.B)}},onEnablerInit_:{value:function(a){Enabler.isInitialized()?a():Enabler.addEventListener(studio.events.StudioEvent.INIT,a)},enumerable:!1},handleEnablerInit_:{value:function(){if(this.hasAttribute("polite-load"))this.onEnablerPageLoaded_(this.t);
else this.onEnablerVisible_(this.p)},enumerable:!1},onEnablerVisible_:{value:function(a){Enabler.isVisible()?a():Enabler.addEventListener(studio.events.StudioEvent.VISIBLE,a)},enumerable:!1},handleEnablerVisible_:{value:function(a){if(!this.j){var b;a&&(b=a.detail);a=this.renderAd_.bind(this,b);this.isDynamicAd_()?this.handleDynamicData_(a):a()}},enumerable:!1},onEnablerPageLoaded_:{value:function(a){Enabler.isPageLoaded()?a():Enabler.addEventListener(studio.events.StudioEvent.PAGE_LOADED,a)},enumerable:!1},
handleEnablerPageLoaded_:{value:function(){this.onEnablerVisible_(this.p)},enumerable:!1},isDynamicAd_:{value:function(){return!!this.c},enumerable:!1},handleDynamicData_:{value:function(a){if(this.c){var b=this.c.getData(),d=this.onDynamicDataReady_.bind(this,a);b?d():a();this.c.addEventListener("ready",d)}else a()},enumerable:!1},onDynamicDataReady_:{value:function(a){var b=document.getElementsByTagName("gwd-data-binder");if(0<b.length){var b=b[0],d=this.c.getData(),c=this.a.getElementsBySelector("*"),
c=c.concat(this.a.getPages());b.bindData(d,c)}a()},enumerable:!1},renderAd_:{value:function(a){if(!this.j){this.j=!0;var b;a?(b=document.createEvent("CustomEvent"),b.initCustomEvent("adinitialized",!0,!0,a)):(b=document.createEvent("Event"),b.initEvent("adinitialized",!0,!0));this.dispatchEvent(b);this.goToPage()}},enumerable:!1},goToPage:{value:function(a,b,d,c,e){var f=this.a.getPage(this.a.currentIndex);if(a=a?this.a.getPage(a):this.a.getDefaultPage())this.e=a.id,b&&(this.f={transition:b,duration:d,
C:c,direction:e}),f&&a&&this.shouldExpand_(f,a)?this.expand_():f&&a&&this.shouldCollapse_(f,a)?this.d?Enabler.requestFullscreenCollapse():Enabler.requestCollapse():(this.k=this.l=!1,this.goToNextPage_())},enumerable:!0,writable:!0},expand_:{value:function(){if(this.F&&!1!==this.o)if(this.o)this.d=!0,Enabler.requestFullscreenExpand();else{var a=function(b){this.o=!!b.supported;this.expand_();Enabler.removeEventListener(studio.events.StudioEvent.FULLSCREEN_SUPPORT,a)}.bind(this);Enabler.addEventListener(studio.events.StudioEvent.FULLSCREEN_SUPPORT,
a);Enabler.queryFullscreenSupport()}else Enabler.requestExpand()}},shouldExpand_:{value:function(a,b){return!this.l&&!a.hasAttribute("expanded")&&b.hasAttribute("expanded")}},shouldCollapse_:{value:function(a,b){return!this.k&&a.hasAttribute("expanded")&&!b.hasAttribute("expanded")}},handleEnablerExpandStart_:{value:function(){this.l=!0;this.d?Enabler.finishFullscreenExpand():Enabler.finishExpand();setTimeout(this.goToNextPage_.bind(this),30)},enumerable:!1},handleEnablerCollapseStart_:{value:function(){this.k=
!0;this.d?(Enabler.finishFullscreenCollapse(),this.d=!1):Enabler.finishCollapse();this.e||(this.reportManualClose(),this.e=this.a.getDefaultPage().id);setTimeout(this.goToNextPage_.bind(this),30)},enumerable:!1},handleResize_:{value:function(){if(!this.e){var a=window.innerHeight>=window.innerWidth?1:2;this.n!=a&&(this.n=a,(a=this.a.getPage(this.a.currentIndex))&&this.goToPage(a.id))}}},goToNextPage_:{value:function(){if(this.e){this.n=window.innerHeight>=window.innerWidth?1:2;var a=this.a.getOrientationSpecificPage(this.n,
this.e);this.f?this.a.goToPage(a.id,this.f.transition,this.f.duration,this.f.C,this.f.direction):this.a.goToPage(a.id);this.d&&a.classList.add("fs")}this.f=this.e=void 0}},handlePageTransitionEnd_:{value:function(a){this.k=this.l=!1;if(a.target==this.a){var b=a.detail;a=b.outgoingPage;b=b.incomingPage;a&&this.handlePageUnbound_(a);this.handlePageBound_(b)}},enumerable:!1},handlePageBound_:{value:function(a){this.u.observe(a);if((a=a.querySelectorAll("video"))&&0<a.length){var b=studio.video&&studio.video.Reporter,
d=this.registerVideoElements_.bind(this);this.r=Array.prototype.slice.call(a);b?d():Enabler.loadModule(studio.module.ModuleId.VIDEO,d)}},enumerable:!1},handlePageUnbound_:{value:function(a){p(this.u,a);(a=a.querySelectorAll("video"))&&0<a.length&&this.unregisterVideoElements_()},enumerable:!1},registerVideoElements_:{value:function(){for(var a,b;this.r.length;)if(b=this.r.shift(),a=this.getIdentifier_(b))studio.video.Reporter.attach(a,b,b.autoplay),this.q.push(a)},enumerable:!1},unregisterVideoElements_:{value:function(){for(this.r=
[];this.q.length;)studio.video.Reporter.detach(this.q.shift())},enumerable:!1},isGwdIdLoaded_:{value:function(){return"object"==typeof gwd&&"GwdId"in gwd},enumerable:!1},getIdentifier_:{value:function(a){return this.isGwdIdLoaded_()?(new gwd.GwdId(a)).getString():"string"==typeof a?a:a.id},enumerable:!1},pauseMedia_:{value:function(){Array.prototype.slice.call(this.a.querySelectorAll("video, gwd-youtube, audio")).forEach(function(a){a.pause()})},enumerable:!1}})});}()
